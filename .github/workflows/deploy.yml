name: Deploy Flask App via FTPS (app.py + requirements.txt + runtime.txt)

on:
  push:
    branches:
      - main

jobs:
  deploy-via-ftps:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v4

    - name: Upload files via FTPS
      run: |
        echo "ðŸ”¼ Hochladen von app.py, requirements.txt, runtime.txt via FTPS..."

        curl -T app.py --ftp-ssl -u "${{ secrets.FTP_USERNAME }}:${{ secrets.FTP_PASSWORD }}" "ftps://${{ secrets.FTP_SERVER }}/site/wwwroot/app.py"
        curl -T requirements.txt --ftp-ssl -u "${{ secrets.FTP_USERNAME }}:${{ secrets.FTP_PASSWORD }}" "ftps://${{ secrets.FTP_SERVER }}/site/wwwroot/requirements.txt"
        curl -T runtime.txt --ftp-ssl -u "${{ secrets.FTP_USERNAME }}:${{ secrets.FTP_PASSWORD }}" "ftps://${{ secrets.FTP_SERVER }}/site/wwwroot/runtime.txt"

        echo "âœ… Dateien erfolgreich hochgeladen."
